<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sa√∫de do Adulto</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos espec√≠ficos para esta p√°gina */
        .screening-card { 
            background: white; 
            padding: 15px; 
            border-radius: 10px; 
            margin-bottom: 12px; 
            border-left: 6px solid #ccc; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
        }
        .sc-header { 
            font-weight: 800; 
            color: #455A64; 
            margin-bottom: 6px; 
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .sc-body { font-size: 0.95rem; color: #333; line-height: 1.5; }
        
        .border-red { border-left-color: #EF5350; }
        .border-orange { border-left-color: #FFA726; }
        .border-green { border-left-color: #66BB6A; }

        /* Abas de Rastreamento */
        .tab-btn { flex: 1; padding: 12px; border: none; background: #ECEFF1; border-radius: 10px; cursor: pointer; font-weight: 700; color: #78909C; transition: all 0.2s; }
        .tab-btn.active { background: #37474F; color: #FFFFFF; box-shadow: 0 4px 6px rgba(0,0,0,0.1); } /* Bot√£o ativo escuro */

        /* PREVENT Badge */
        .btn-info-badge {
            background-color: #E3F2FD; color: #1565C0; border: none; padding: 6px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 700; cursor: pointer; display: inline-flex; align-items: center; gap: 5px; text-decoration: none; float: right;
        }
        .btn-info-badge:hover { background-color: #BBDEFB; }
        .prevent-result-val { font-size: 2.2rem; font-weight: 900; color: var(--primary); }

        /* Espa√ßamento dos question√°rios */
        .q-block { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .q-title { font-weight: 700; color: #333; margin-bottom: 12px; display: block; font-size: 1rem; }
    </style>
</head>
<body>

    <header class="app-header">
        <button class="back-btn" onclick="goBack()" id="backBtn">‚¨Ö</button>
        <div class="app-title">Sa√∫de do Adulto üßë</div>
    </header>

    <div class="container">

        <section id="view-adulto" class="view-section" style="display: block;">
            <div class="menu-grid">
                <div class="menu-card b-blue" onclick="navigateTo('view-prevent')">
                    <span class="card-icon">‚ù§Ô∏è</span><div class="card-title">Cardiovascular</div>
                </div>
                <div class="menu-card b-green" onclick="navigateTo('view-screening')">
                    <span class="card-icon">üîç</span><div class="card-title">Rastreamento</div>
                </div>
                <div class="menu-card b-purple" onclick="navigateTo('view-substancias')">
                    <span class="card-icon">üö¨</span><div class="card-title">Subst√¢ncias</div>
                </div>
                <div class="menu-card b-orange" onclick="navigateTo('view-vacinas')">
                    <span class="card-icon">üíâ</span><div class="card-title">Vacina√ß√£o</div>
                </div>
                <div class="menu-card b-blue" onclick="navigateTo('view-cockcroft')">
                    <span class="card-icon">üíß</span><div class="card-title">Renal (ClCr)</div>
                </div>
            </div>
        </section>

        <section id="view-prevent" class="view-section">
            <div class="calc-box">
                <div style="overflow:hidden; margin-bottom:20px; border-bottom:1px solid #eee; padding-bottom:10px;">
                    <h3 style="float:left; margin:0; border:none;">Calculadora PREVENT‚Ñ¢</h3>
                    <button class="btn-info-badge" onclick="document.getElementById('modalPrevent').style.display='flex'">‚ÑπÔ∏è Elegibilidade</button>
                </div>
                
                <div class="radio-inline-group">
                    <label class="radio-label"><input type="radio" name="horizon" value="10" checked onchange="updateUI()"> <span>10 Anos</span></label>
                    <label class="radio-label"><input type="radio" name="horizon" value="30" onchange="updateUI()"> <span>30 Anos</span></label>
                </div>

                <form onsubmit="event.preventDefault(); runPrevent();">
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                        <div><label>Idade (anos)</label><input type="number" id="p-age" required><small id="age-hint" style="color:#888; font-size:0.8rem;">(30-79)</small></div>
                        <div><label>Sexo</label><select id="p-sex"><option value="female">Feminino</option><option value="male">Masculino</option></select></div>
                        <div><label>Colesterol Total</label><input type="number" id="p-chol" placeholder="mg/dL" required></div>
                        <div><label>HDL</label><input type="number" id="p-hdl" placeholder="mg/dL" required></div>
                        <div><label>Press√£o Sist√≥lica</label><input type="number" id="p-sbp" placeholder="mmHg" required></div>
                        <div><label>eGFR</label><input type="number" id="p-egfr" placeholder="mL/min" required></div>
                        <div><label>Peso (kg)</label><input type="number" id="p-w" required></div>
                        <div><label>Altura (cm)</label><input type="number" id="p-h" required></div>
                    </div>
                    <div style="background:#F1F3F4; padding:15px; border-radius:10px; margin-top:15px; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                        <label>Diabetes? <select id="p-diab"><option value="0">N√£o</option><option value="1">Sim</option></select></label>
                        <label>Fumante? <select id="p-smoke"><option value="0">N√£o</option><option value="1">Sim</option></select></label>
                        <label>Anti-hipertensivo? <select id="p-meds"><option value="0">N√£o</option><option value="1">Sim</option></select></label>
                        <label>Estatina? <select id="p-stat"><option value="0">N√£o</option><option value="1">Sim</option></select></label>
                    </div>
                    <button class="btn-calc">Calcular Risco</button>
                </form>

                <div id="res-prevent" class="result-box">
                    <h4 style="margin:0; color:var(--primary); text-transform:uppercase; letter-spacing:1px;">Resultados Estimados</h4>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-top:15px;">
                        <div style="background:white; padding:15px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                            <div style="font-size:0.8rem; color:#666; font-weight:bold; text-transform:uppercase;">CVD Total</div>
                            <div class="prevent-result-val" id="val-cvd">--</div>
                            <small style="color:#999;">Infarto e AVC</small>
                        </div>
                        <div style="background:white; padding:15px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                            <div style="font-size:0.8rem; color:#666; font-weight:bold; text-transform:uppercase;">Insuf. Card√≠aca</div>
                            <div class="prevent-result-val" id="val-hf">--</div>
                            <small style="color:#999;">Heart Failure</small>
                        </div>
                    </div>
                    <p style="font-size:0.9rem; color:#666; margin-top:15px;">IMC Calculado: <strong id="val-bmi">--</strong></p>
                </div>
            </div>
        </section>

        <section id="view-screening" class="view-section">
            <div class="calc-box">
                <h3>üîç Rastreamento</h3>
                
                <div class="screening-tabs">
                    <button class="tab-btn active" onclick="switchTab('tab-geral', this)">Geral</button>
                    <button class="tab-btn" onclick="switchTab('tab-ist', this)">ISTs</button>
                </div>

                <div id="tab-geral">
                    <form onsubmit="event.preventDefault(); runScreening();">
                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-bottom:15px;">
                            <div><label>Sexo</label><select id="s-sex"><option value="F">Feminino</option><option value="M">Masculino</option></select></div>
                            <div><label>Idade</label><input type="number" id="s-age" required></div>
                        </div>
                        
                        <label style="font-weight:bold; margin-top:10px;">Fatores de Risco / Hist√≥rico:</label>
                        <div class="checkbox-group">
                            <label class="chk-item"><input type="checkbox" id="fr-obesidade"> Sobrepeso/Obesidade</label>
                            <label class="chk-item"><input type="checkbox" id="fr-has"> Hipertens√£o Arterial</label>
                            <label class="chk-item"><input type="checkbox" id="fr-dm-fam"> Hist√≥rico Familiar Diabetes</label>
                            <label class="chk-item"><input type="checkbox" id="fr-cvd"> Doen√ßa CV Pessoal</label>
                            <label class="chk-item"><input type="checkbox" id="fr-tabagismo"> Tabagismo</label>
                            <label class="chk-item"><input type="checkbox" id="fr-fam-colon"> Hist. Fam. C√¢ncer C√≥lon</label>
                            <label class="chk-item"><input type="checkbox" id="fr-fam-prostata"> Hist. Fam. C√¢ncer Pr√≥stata</label>
                        </div>
                        <button class="btn-calc" style="background:#4CAF50;">Gerar Recomenda√ß√µes</button>
                    </form>
                    <div id="res-screening" class="result-box" style="text-align:left; display:none;"></div>
                </div>

                <div id="tab-ist" style="display:none;">
                    <p style="font-size:0.9rem; color:#666; margin-bottom:15px;">Selecione os grupos de risco aplic√°veis:</p>
                    <div class="checkbox-group">
                        <label class="chk-item"><input type="checkbox" id="ist-gestante"> Gestante</label>
                        <label class="chk-item"><input type="checkbox" id="ist-keypop"> Popula√ß√£o-Chave (HSH, Trans)</label>
                        <label class="chk-item"><input type="checkbox" id="ist-hiv"> PVHIV (Vivendo com HIV)</label>
                        <label class="chk-item"><input type="checkbox" id="ist-prep"> Em uso de PrEP</label>
                    </div>
                    <button class="btn-calc" style="background:#FFA726;" onclick="runIST()">Verificar Protocolo</button>
                    <div id="res-ist" class="result-box" style="text-align:left; display:none;"></div>
                </div>
            </div>
        </section>

        <section id="view-substancias" class="view-section">
            <div class="menu-grid">
                <div class="menu-card b-purple" onclick="navigateTo('view-cage')">
                    <span class="card-icon">üç∫</span><div class="card-title">CAGE</div>
                </div>
                <div class="menu-card b-purple" onclick="navigateTo('view-audit')">
                    <span class="card-icon">üìä</span><div class="card-title">AUDIT</div>
                </div>
                <div class="menu-card b-purple" onclick="navigateTo('view-fagerstrom')">
                    <span class="card-icon">üö¨</span><div class="card-title">Fagerstr√∂m</div>
                </div>
            </div>
        </section>

        <section id="view-cage" class="view-section">
            <div class="calc-box">
                <h3>üç∫ CAGE (Triagem)</h3>
                <form onsubmit="event.preventDefault(); runCage();">
                    <div class="q-block">
                        <span class="q-title">1. Alguma vez sentiu que deveria diminuir a bebida? (Cut-down)</span>
                        <div class="radio-inline-group" style="justify-content:flex-start; margin:0; padding:10px;">
                            <label class="radio-label"><input type="radio" name="cage1" value="0" checked> N√£o</label>
                            <label class="radio-label"><input type="radio" name="cage1" value="1"> Sim</label>
                        </div>
                    </div>
                    <div class="q-block">
                        <span class="q-title">2. As pessoas o aborrecem criticando seu modo de beber? (Annoyed)</span>
                        <div class="radio-inline-group" style="justify-content:flex-start; margin:0; padding:10px;">
                            <label class="radio-label"><input type="radio" name="cage2" value="0" checked> N√£o</label>
                            <label class="radio-label"><input type="radio" name="cage2" value="1"> Sim</label>
                        </div>
                    </div>
                    <div class="q-block">
                        <span class="q-title">3. Sente culpa pela maneira com que bebe? (Guilty)</span>
                        <div class="radio-inline-group" style="justify-content:flex-start; margin:0; padding:10px;">
                            <label class="radio-label"><input type="radio" name="cage3" value="0" checked> N√£o</label>
                            <label class="radio-label"><input type="radio" name="cage3" value="1"> Sim</label>
                        </div>
                    </div>
                    <div class="q-block">
                        <span class="q-title">4. Bebe de manh√£ para diminuir nervosismo/ressaca? (Eye-opener)</span>
                        <div class="radio-inline-group" style="justify-content:flex-start; margin:0; padding:10px;">
                            <label class="radio-label"><input type="radio" name="cage4" value="0" checked> N√£o</label>
                            <label class="radio-label"><input type="radio" name="cage4" value="1"> Sim</label>
                        </div>
                    </div>
                    <button class="btn-calc btn-purple">Verificar Resultado</button>
                </form>
                <div id="res-cage" class="result-box"></div>
            </div>
        </section>

        <section id="view-audit" class="view-section">
            <div class="calc-box">
                <h3>üìä AUDIT (OMS)</h3>
                <p style="font-size:0.8rem; color:#666; margin-bottom:20px;">Refere-se aos √∫ltimos 12 meses.</p>
                <form onsubmit="event.preventDefault(); runAudit();">
                    
                    <div class="q-block"><span class="q-title">1. Com que frequ√™ncia consome bebidas que cont√™m √°lcool?</span><label class="radio-opt"><input type="radio" name="aud0" value="0" checked> <span>Nunca</span></label><label class="radio-opt"><input type="radio" name="aud0" value="1"> <span>Mensal ou menos</span></label><label class="radio-opt"><input type="radio" name="aud0" value="2"> <span>2-4 vezes por m√™s</span></label><label class="radio-opt"><input type="radio" name="aud0" value="3"> <span>2-3 vezes por semana</span></label><label class="radio-opt"><input type="radio" name="aud0" value="4"> <span>4 ou mais vezes por semana</span></label></div>

                    <div class="q-block"><span class="q-title">2. Quantas doses consome num dia t√≠pico quando bebe?</span><label class="radio-opt"><input type="radio" name="aud1" value="0" checked> <span>1 ou 2</span></label><label class="radio-opt"><input type="radio" name="aud1" value="1"> <span>3 ou 4</span></label><label class="radio-opt"><input type="radio" name="aud1" value="2"> <span>5 ou 6</span></label><label class="radio-opt"><input type="radio" name="aud1" value="3"> <span>7 a 9</span></label><label class="radio-opt"><input type="radio" name="aud1" value="4"> <span>10 ou mais</span></label></div>

                    <div class="q-block"><span class="q-title">3. Com que frequ√™ncia consome 6 ou mais doses numa √∫nica ocasi√£o?</span><label class="radio-opt"><input type="radio" name="aud2" value="0" checked> <span>Nunca</span></label><label class="radio-opt"><input type="radio" name="aud2" value="1"> <span>Menos de mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud2" value="2"> <span>Mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud2" value="3"> <span>Semanalmente</span></label><label class="radio-opt"><input type="radio" name="aud2" value="4"> <span>Diariamente ou quase</span></label></div>

                    <div class="q-block"><span class="q-title">4. Com que frequ√™ncia n√£o conseguiu parar de beber depois de come√ßar?</span><label class="radio-opt"><input type="radio" name="aud3" value="0" checked> <span>Nunca</span></label><label class="radio-opt"><input type="radio" name="aud3" value="1"> <span>Menos de mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud3" value="2"> <span>Mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud3" value="3"> <span>Semanalmente</span></label><label class="radio-opt"><input type="radio" name="aud3" value="4"> <span>Diariamente</span></label></div>

                    <div class="q-block"><span class="q-title">5. Com que frequ√™ncia deixou de cumprir tarefas devido √† bebida?</span><label class="radio-opt"><input type="radio" name="aud4" value="0" checked> <span>Nunca</span></label><label class="radio-opt"><input type="radio" name="aud4" value="1"> <span>Menos de mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud4" value="2"> <span>Mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud4" value="3"> <span>Semanalmente</span></label><label class="radio-opt"><input type="radio" name="aud4" value="4"> <span>Diariamente</span></label></div>

                    <div class="q-block"><span class="q-title">6. Precisou beber pela manh√£ para curar ressaca?</span><label class="radio-opt"><input type="radio" name="aud5" value="0" checked> <span>Nunca</span></label><label class="radio-opt"><input type="radio" name="aud5" value="1"> <span>Menos de mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud5" value="2"> <span>Mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud5" value="3"> <span>Semanalmente</span></label><label class="radio-opt"><input type="radio" name="aud5" value="4"> <span>Diariamente</span></label></div>

                    <div class="q-block"><span class="q-title">7. Sentimento de culpa ou remorso ap√≥s beber?</span><label class="radio-opt"><input type="radio" name="aud6" value="0" checked> <span>Nunca</span></label><label class="radio-opt"><input type="radio" name="aud6" value="1"> <span>Menos de mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud6" value="2"> <span>Mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud6" value="3"> <span>Semanalmente</span></label><label class="radio-opt"><input type="radio" name="aud6" value="4"> <span>Diariamente</span></label></div>

                    <div class="q-block"><span class="q-title">8. Teve apag√£o de mem√≥ria (amn√©sia) devido √† bebida?</span><label class="radio-opt"><input type="radio" name="aud7" value="0" checked> <span>Nunca</span></label><label class="radio-opt"><input type="radio" name="aud7" value="1"> <span>Menos de mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud7" value="2"> <span>Mensalmente</span></label><label class="radio-opt"><input type="radio" name="aud7" value="3"> <span>Semanalmente</span></label><label class="radio-opt"><input type="radio" name="aud7" value="4"> <span>Diariamente</span></label></div>

                    <div class="q-block"><span class="q-title">9. Voc√™ ou algu√©m se feriu por causa da sua bebida?</span><label class="radio-opt"><input type="radio" name="aud8" value="0" checked> <span>N√£o</span></label><label class="radio-opt"><input type="radio" name="aud8" value="2"> <span>Sim, mas n√£o no √∫ltimo ano</span></label><label class="radio-opt"><input type="radio" name="aud8" value="4"> <span>Sim, no √∫ltimo ano</span></label></div>

                    <div class="q-block"><span class="q-title">10. Parente ou m√©dico sugeriu que parasse de beber?</span><label class="radio-opt"><input type="radio" name="aud9" value="0" checked> <span>N√£o</span></label><label class="radio-opt"><input type="radio" name="aud9" value="2"> <span>Sim, mas n√£o no √∫ltimo ano</span></label><label class="radio-opt"><input type="radio" name="aud9" value="4"> <span>Sim, no √∫ltimo ano</span></label></div>

                    <button class="btn-calc btn-purple">Calcular Pontua√ß√£o</button>
                </form>
                <div id="res-audit" class="result-box" style="text-align:left;"></div>
            </div>
        </section>

        <section id="view-fagerstrom" class="view-section">
            <div class="calc-box">
                <h3>üö¨ Fagerstr√∂m (Tabagismo)</h3>
                <form onsubmit="event.preventDefault(); runFager();">
                    
                    <div class="q-block"><span class="q-title">1. Quanto tempo ap√≥s acordar fuma o 1¬∫ cigarro?</span><label class="radio-opt"><input type="radio" name="fag0" value="3" checked> <span>&lt; 5 min</span></label><label class="radio-opt"><input type="radio" name="fag0" value="2"> <span>6-30 min</span></label><label class="radio-opt"><input type="radio" name="fag0" value="1"> <span>31-60 min</span></label><label class="radio-opt"><input type="radio" name="fag0" value="0"> <span>&gt; 60 min</span></label></div>

                    <div class="q-block"><span class="q-title">2. Acha dif√≠cil n√£o fumar em locais proibidos?</span><label class="radio-opt"><input type="radio" name="fag1" value="1"> <span>Sim</span></label><label class="radio-opt"><input type="radio" name="fag1" value="0" checked> <span>N√£o</span></label></div>

                    <div class="q-block"><span class="q-title">3. Qual cigarro traz mais satisfa√ß√£o?</span><label class="radio-opt"><input type="radio" name="fag2" value="1"> <span>O primeiro da manh√£</span></label><label class="radio-opt"><input type="radio" name="fag2" value="0" checked> <span>Outros</span></label></div>

                    <div class="q-block"><span class="q-title">4. Quantos cigarros fuma por dia?</span><label class="radio-opt"><input type="radio" name="fag3" value="0" checked> <span>&lt; 10</span></label><label class="radio-opt"><input type="radio" name="fag3" value="1"> <span>11-20</span></label><label class="radio-opt"><input type="radio" name="fag3" value="2"> <span>21-30</span></label><label class="radio-opt"><input type="radio" name="fag3" value="3"> <span>&gt; 31</span></label></div>

                    <div class="q-block"><span class="q-title">5. Fuma mais frequentemente pela manh√£?</span><label class="radio-opt"><input type="radio" name="fag4" value="1"> <span>Sim</span></label><label class="radio-opt"><input type="radio" name="fag4" value="0" checked> <span>N√£o</span></label></div>

                    <div class="q-block"><span class="q-title">6. Fuma mesmo se estiver doente (acamado)?</span><label class="radio-opt"><input type="radio" name="fag5" value="1"> <span>Sim</span></label><label class="radio-opt"><input type="radio" name="fag5" value="0" checked> <span>N√£o</span></label></div>

                    <button class="btn-calc btn-purple">Avaliar Depend√™ncia</button>
                </form>
                <div id="res-fager" class="result-box"></div>
            </div>
        </section>

        <section id="view-vacinas" class="view-section">
            <div class="calc-box">
                <h3>üíâ Vacina√ß√£o Adulto (20-59 anos)</h3>
                <ul class="vaccine-list">
                    <li class="vaccine-item"><div class="vaccine-header" onclick="toggleVac(this)"><span>üõ°Ô∏è</span> <strong>Hepatite B (3 Doses)</strong></div><div class="vaccine-content">Esquema: 0, 1 e 6 meses.<br>Indica√ß√£o: Pessoas n√£o vacinadas.<br>Local: Deltoide.</div></li>
                    <li class="vaccine-item"><div class="vaccine-header" onclick="toggleVac(this)"><span>ü©π</span> <strong>Dupla Adulto (dT)</strong></div><div class="vaccine-content">Refor√ßo: A cada 10 anos.<br>Ferimentos graves: Antecipar se > 5 anos.<br>Gestantes: dTpa (20¬™ sem).</div></li>
                    <li class="vaccine-item"><div class="vaccine-header" onclick="toggleVac(this)"><span>ü¶†</span> <strong>Tr√≠plice Viral (SCR)</strong></div><div class="vaccine-content">At√© 29 anos: 2 doses.<br>30 a 59 anos: 1 dose.<br>CI: Gestantes/Imunossuprimidos.</div></li>
                    <li class="vaccine-item"><div class="vaccine-header" onclick="toggleVac(this)"><span>ü¶ü</span> <strong>Febre Amarela</strong></div><div class="vaccine-content">Dose √∫nica para nunca vacinados.<br>Precau√ß√£o: >60 anos, gestantes, lactantes.</div></li>
                    <li class="vaccine-item"><div class="vaccine-header" onclick="toggleVac(this)"><span>ü§ß</span> <strong>Influenza (Gripe)</strong></div><div class="vaccine-content">Indica√ß√£o: Dose anual durante campanhas.<br>P√∫blico Priorit√°rio: Idosos, sa√∫de, comorbidades.</div></li>
                </ul>
            </div>
        </section>

        <section id="view-cockcroft" class="view-section">
            <div class="calc-box">
                <h3>üíß Clearance de Creatinina</h3>
                <form onsubmit="event.preventDefault(); runCockcroft();">
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px;">
                        <div><label>Idade</label><input type="number" id="c-age" required></div>
                        <div><label>Peso (kg)</label><input type="number" id="c-w" required></div>
                        <div><label>Creatinina</label><input type="number" id="c-cr" step="0.01" required></div>
                        <div><label>Sexo</label><select id="c-sex"><option value="M">Masculino</option><option value="F">Feminino</option></select></div>
                    </div>
                    <button class="btn-calc btn-blue">Calcular ClCr</button>
                </form>
                <div id="res-cockcroft" class="result-box"></div>
            </div>
        </section>

    </div>

    <div id="modalPrevent" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="document.getElementById('modalPrevent').style.display='none'">&times;</span>
            <h3 style="margin-top:0; color:var(--accent);">‚ÑπÔ∏è Elegibilidade</h3>
            <div style="background:#FFEBEE; padding:15px; border-radius:10px; margin-bottom:15px; border-left:4px solid #EF5350;">
                <strong>Contraindica√ß√µes:</strong>
                <ul style="margin:5px 0 0 15px; font-size:0.9rem;">
                    <li>Doen√ßa Cardiovascular Pr√©via (Infarto, AVC, IC).</li>
                    <li>Pacientes em Di√°lise.</li>
                </ul>
            </div>
            <p><strong>Faixas Et√°rias:</strong></p>
            <ul>
                <li>Risco 10 Anos: 30 a 79 anos.</li>
                <li>Risco 30 Anos: 30 a 59 anos.</li>
            </ul>
        </div>
    </div>

    <footer style="text-align:center; padding:20px; color:#888; font-size:0.8rem; border-top:1px solid #eee; margin-top:40px;">
        Cerebro de √Åtila (R) 2025. Direitos reservados.<br>
        C√≥digo-fonte criado por √Åtila Paix√£o, com assist√™ncia do Google Gemini Pro 3.
    </footer>

    <script>
        // NAVEGA√á√ÉO
        let stack = ['view-adulto'];

        function navigateTo(targetId) {
            document.querySelectorAll('.view-section').forEach(v => v.style.display = 'none');
            document.getElementById(targetId).style.display = 'block';
            stack.push(targetId);
            window.scrollTo(0,0);
        }

        function goBack() {
            if(stack.length > 1) {
                stack.pop();
                const prev = stack[stack.length - 1];
                document.querySelectorAll('.view-section').forEach(v => v.style.display = 'none');
                document.getElementById(prev).style.display = 'block';
            } else {
                window.location.href = 'index.html';
            }
        }

        function toggleVac(el) { const c = el.nextElementSibling; c.style.display = c.style.display === 'block' ? 'none' : 'block'; }
        
        function switchTab(id, btn) {
            document.getElementById('tab-geral').style.display = id==='tab-geral'?'block':'none';
            document.getElementById('tab-ist').style.display = id==='tab-ist'?'block':'none';
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function updateUI() {
            const h = document.querySelector('input[name="horizon"]:checked').value;
            document.getElementById('age-hint').innerText = h==='30' ? "(30-59 anos)" : "(30-79 anos)";
        }

        // --- PREVENT LOGIC (100% ORIGINAL - L√≥gica Matem√°tica Completa) ---
        function runPrevent() {
            const h = document.querySelector('input[name="horizon"]:checked').value;
            const sex = document.getElementById('p-sex').value;
            const age = parseFloat(document.getElementById('p-age').value);
            const tc = parseFloat(document.getElementById('p-chol').value);
            const hdl = parseFloat(document.getElementById('p-hdl').value);
            const sbp = parseFloat(document.getElementById('p-sbp').value);
            const egfr = parseFloat(document.getElementById('p-egfr').value);
            const w = parseFloat(document.getElementById('p-w').value);
            const ht = parseFloat(document.getElementById('p-h').value);
            const diab = parseInt(document.getElementById('p-diab').value);
            const smk = parseInt(document.getElementById('p-smoke').value);
            const meds = parseInt(document.getElementById('p-meds').value);
            const statin = parseInt(document.getElementById('p-stat').value);

            if(!age||!tc||!sbp||!w||!ht){ alert("Preencha todos os campos obrigat√≥rios."); return; }
            if(h==='30' && age>59){ alert("C√°lculo 30 anos validado apenas at√© 59 anos."); return; }

            const bmi = w / ((ht/100)**2);
            // Coeficientes e transforma√ß√µes AHA 2023 (Base Model)
            const c_age=(age-55)/10, c_age2=c_age**2, nonhdl=(tc-hdl)*0.02586-3.5, c_hdl=(hdl*0.02586-1.3)/0.3, sbp_min=(Math.min(sbp,110)-110)/20, sbp_max=(Math.max(sbp,110)-130)/20, egfr_min=(Math.min(egfr,60)-60)/-15, egfr_max=(Math.max(egfr,60)-90)/-15, c_bmi_min=(Math.min(bmi,30)-25)/5, c_bmi_max=(Math.max(bmi,30)-30)/5;
            let l_cvd=0, l_hf=0;

            if(h==='30') {
                if(sex==='female') {
                    l_cvd=-1.318827 + 0.5503079*c_age - 0.0928369*c_age2 + 0.0409794*nonhdl - 0.1663306*c_hdl - 0.1628654*sbp_min + 0.3299505*sbp_max + 0.6793894*diab + 0.3196112*smk + 0.1857101*egfr_min + 0.0553528*egfr_max + 0.2894*meds - 0.075688*statin - 0.0845505*(meds*sbp_max) + 0.1071019*(statin*nonhdl) - 0.0751438*(c_age*nonhdl) + 0.0301786*(c_age*c_hdl) - 0.0998776*(c_age*sbp_max) - 0.3206166*(c_age*diab) - 0.1607862*(c_age*smk) - 0.1450788*(c_age*egfr_min);
                    l_hf=-2.205379 + 0.6254374*c_age - 0.0983038*c_age2 - 0.3919241*sbp_min + 0.3142295*sbp_max + 0.8330787*diab + 0.3438651*smk + 0.0594874*c_bmi_min + 0.2525536*c_bmi_max + 0.333921*meds - 0.1339765*(meds*sbp_max) - 0.0974299*(c_age*sbp_max) - 0.404855*(c_age*diab) - 0.1982991*(c_age*smk) - 0.0035619*(c_age*c_bmi_max) - 0.1564215*(c_age*egfr_min);
                } else {
                    l_cvd=-1.148204 + 0.4627309*c_age - 0.0984281*c_age2 + 0.0836088*nonhdl - 0.1029824*c_hdl - 0.2140352*sbp_min + 0.2904325*sbp_max + 0.5331276*diab + 0.2141914*smk + 0.1155556*egfr_min + 0.0603775*egfr_max + 0.232714*meds - 0.0272112*statin - 0.0576732*(meds*sbp_max) + 0.134192*(statin*nonhdl) - 0.0511759*(c_age*nonhdl) + 0.0165865*(c_age*c_hdl) - 0.1101437*(c_age*sbp_max) - 0.2585943*(c_age*diab) - 0.1566406*(c_age*smk) - 0.1166776*(c_age*egfr_min);
                    l_hf=-1.95751 + 0.5681541*c_age - 0.1048388*c_age2 - 0.4761564*sbp_min + 0.30324*sbp_max + 0.6840338*diab + 0.2656273*smk + 0.0833107*c_bmi_min + 0.26999*c_bmi_max + 0.2541805*egfr_min + 0.0638923*egfr_max + 0.2583631*meds - 0.0497731*(meds*sbp_max) - 0.1269124*(c_age*sbp_max) - 0.3273572*(c_age*diab) - 0.2043019*(c_age*smk) + 0.0068126*(c_age*c_bmi_max) - 0.1342618*(c_age*egfr_min);
                }
            } else { // 10 Anos
                if(sex==='female') {
                    l_cvd=-3.307728 + 0.7939329*c_age + 0.0305239*nonhdl - 0.1606857*c_hdl - 0.2394003*sbp_min + 0.360078*sbp_max + 0.8667604*diab + 0.5360739*smk + 0.6045917*egfr_min + 0.0433769*egfr_max + 0.3151672*meds - 0.1477655*statin - 0.0663612*(meds*sbp_max) + 0.1197879*(statin*nonhdl) - 0.0819715*(c_age*nonhdl) + 0.0306769*(c_age*c_hdl) - 0.0946348*(c_age*sbp_max) - 0.27057*(c_age*diab) - 0.078715*(c_age*smk) - 0.1637806*(c_age*egfr_min);
                    l_hf=-4.310409 + 0.8998235*c_age - 0.4559771*sbp_min + 0.3576505*sbp_max + 1.038346*diab + 0.583916*smk - 0.0072294*c_bmi_min + 0.2997706*c_bmi_max + 0.7451638*egfr_min + 0.0557087*egfr_max + 0.3534442*meds - 0.0981511*(meds*sbp_max) - 0.0946663*(c_age*sbp_max) - 0.3581041*(c_age*diab) - 0.1159453*(c_age*smk) - 0.003878*(c_age*c_bmi_max) - 0.1884289*(c_age*egfr_min);
                } else {
                    l_cvd=-3.031168 + 0.7688528*c_age + 0.0736174*nonhdl - 0.0954431*c_hdl - 0.4347345*sbp_min + 0.3362658*sbp_max + 0.7692857*diab + 0.4386871*smk + 0.5378979*egfr_min + 0.0164827*egfr_max + 0.288879*meds - 0.1337349*statin - 0.0475924*(meds*sbp_max) + 0.150273*(statin*nonhdl) - 0.0517874*(c_age*nonhdl) + 0.0191169*(c_age*c_hdl) - 0.1049477*(c_age*sbp_max) - 0.2251948*(c_age*diab) - 0.0895067*(c_age*smk) - 0.1543702*(c_age*egfr_min);
                    l_hf=-3.946391 + 0.8972642*c_age - 0.6811466*sbp_min + 0.3634461*sbp_max + 0.923776*diab + 0.5023736*smk - 0.0485841*c_bmi_min + 0.3726929*c_bmi_max + 0.6926917*egfr_min + 0.0251827*egfr_max + 0.2980922*meds - 0.0497731*(meds*sbp_max) - 0.1289201*(c_age*sbp_max) - 0.3040924*(c_age*diab) - 0.1401688*(c_age*smk) + 0.0068126*(c_age*c_bmi_max) - 0.1797778*(c_age*egfr_min);
                }
            }
            
            const r_cvd = 100 * (Math.exp(l_cvd)/(1+Math.exp(l_cvd)));
            const r_hf = 100 * (Math.exp(l_hf)/(1+Math.exp(l_hf)));
            
            document.getElementById('res-prevent').style.display = 'block';
            document.getElementById('val-cvd').innerText = r_cvd.toFixed(1) + "%";
            document.getElementById('val-hf').innerText = r_hf.toFixed(1) + "%";
            document.getElementById('val-bmi').innerText = bmi.toFixed(1);
        }

        // --- RASTREAMENTO & IST ---
        function runScreening() {
            const sex = document.getElementById('s-sex').value;
            const age = parseFloat(document.getElementById('s-age').value);
            const list = document.getElementById('res-screening');
            let html = "";

            if(sex==='F' && age>=25 && age<=64) html+=card('orange','C√¢ncer Colo de √ötero','DNA-HPV (5/5 anos) ou Citopatol√≥gico (3/3 anos).');
            if(sex==='F' && age>=40 && age<=74) html+=card('orange','C√¢ncer de Mama','Mamografia (Anual/Bienal).');
            if(sex==='M' && age>=50) html+=card('orange','C√¢ncer de Pr√≥stata','Decis√£o Compartilhada PSA/Toque.');
            if(age>=50 && age<=75) html+=card('orange','C√¢ncer Colorretal','Sangue Oculto (Anual) ou Colonoscopia.');
            if(document.getElementById('fr-fam-colon').checked) html+=card('red','C√¢ncer Colorretal (Alto Risco)','Colonoscopia Precoce (Consulte especialista).');
            if(age>=35 || document.getElementById('fr-obesidade').checked) html+=card('orange','Diabetes','Glicemia Jejum/HbA1c.');
            
            // Texto HAS atualizado
            if(document.getElementById('fr-has').checked) html+=card('orange','Monitoramento HAS','Anual: Sum√°rio de urina, √Åcido √örico, K, Cr, Microalbumin√∫ria, Glicemia, HbA1c, Perfil Lip√≠dico, ECG.');
            
            if(age>=20 && (document.getElementById('fr-cvd').checked || document.getElementById('fr-tabagismo').checked || document.getElementById('fr-has').checked || document.getElementById('fr-obesidade').checked)) html+=card('orange','Dislipidemia','Colesterol Total e Fra√ß√µes.');

            list.innerHTML = html || card('green','Tudo Certo','Manter acompanhamento de rotina.');
            list.style.display = 'block';
        }
        function card(color, title, text) { return `<div class="screening-card border-${color}"><div class="sc-header">${title}</div><div class="sc-body">${text}</div></div>`; }

        function runIST() {
            const list = document.getElementById('res-ist');
            const age = parseFloat(document.getElementById('s-age').value); 
            let html = card('orange','Popula√ß√£o Geral','HIV, S√≠filis, Hep B/C (M√≠nimo Anual).');

            if(age && age < 30) {
                html += card('orange','< 30 Anos','Rastreio Anual Obrigat√≥rio (Surtos recentes).');
            }
            if(document.getElementById('ist-gestante').checked) {
                html += card('red','Gestante','1¬™ Consulta + 3¬∫ Tri + Parto: HIV, S√≠filis, Hep B/C. Tratar parcerias.');
            }
            if(document.getElementById('ist-prep').checked) {
                html += card('orange','Em PrEP','Trimestral: HIV, S√≠filis, Clam√≠dia/Gonorreia (genital e extragenital).');
            }
            if(document.getElementById('ist-keypop').checked) {
                html += card('orange','Popula√ß√£o Chave','Semestral: HIV, S√≠filis, Hep B/C. Clam√≠dia/Gonorreia (genital e extragenital).');
            }
            if(document.getElementById('ist-hiv').checked) {
                html += card('orange','PVHIV','Anual: S√≠filis, Hep C (se n√£o reagente), Clam√≠dia/Gonorreia. Hep B: monitorar imunidade.');
            }
            
            list.innerHTML = html;
            list.style.display = 'block';
        }

        // --- FAGERSTROM (Corrigido) ---
        function runFager() {
            let s = 0; 
            for(let i=0; i<6; i++) { 
                const els = document.getElementsByName('fag'+i); 
                for(let el of els) if(el.checked) s += parseInt(el.value); 
            }
            let d = "";
            if (s <= 2) d = "Muito Baixa";
            else if (s <= 4) d = "Baixa";
            else if (s === 5) d = "M√©dia";
            else if (s <= 7) d = "Elevada";
            else d = "Muito Elevada";
            
            const res = document.getElementById('res-fager');
            res.innerHTML = `<div class="result-val" style="color:var(--primary);">${s} Pontos</div><div style="font-weight:bold; margin-top:5px; color:#555;">Depend√™ncia ${d}</div>`;
            res.style.display = 'block';
        }

        // --- CAGE ---
        function runCage() {
            let s = 0; for(let i=1; i<=4; i++) { const els = document.getElementsByName('cage'+i); for(let el of els) if(el.checked) s += parseInt(el.value); }
            const res = document.getElementById('res-cage');
            res.style.display = 'block';
            res.innerHTML = `<div class="result-val" style="color:${s>=2?'#EF5350':'#66BB6A'}">${s}/4</div><div style="font-weight:bold; margin-top:5px;">${s>=2?'Sugestivo de Depend√™ncia':'Triagem Negativa'}</div>`;
        }

        // --- AUDIT ---
        function runAudit() {
            let s = 0; for(let i=0; i<10; i++) { const els = document.getElementsByName('aud'+i); for(let el of els) if(el.checked) s += parseInt(el.value); }
            let z="", a="", c="";
            if(s<=7){z="Zona I (Baixo Risco)";a="Educa√ß√£o em sa√∫de.";c="#66BB6A";}
            else if(s<=15){z="Zona II (Uso de Risco)";a="Aconselhamento Simples / Interven√ß√£o Breve.";c="#FFA726";}
            else if(s<=19){z="Zona III (Uso Nocivo)";a="Interven√ß√£o Breve e Monitoramento.";c="#FB8C00";}
            else{z="Zona IV (Prov√°vel Depend√™ncia)";a="Encaminhamento para especialista (CAPS-AD).";c="#EF5350";}
            
            const res = document.getElementById('res-audit');
            res.style.display = 'block';
            res.innerHTML = `<div class="result-val" style="color:${c}">${s} Pontos</div><div style="font-weight:bold; margin-bottom:5px;">${z}</div><div style="background:#f9f9f9; padding:10px; border-radius:8px; font-size:0.9rem; text-align:left;"><strong>Conduta:</strong> ${a}</div>`;
        }

        // --- COCKCROFT ---
        function runCockcroft(){
            const age=parseFloat(document.getElementById('c-age').value), w=parseFloat(document.getElementById('c-w').value), cr=parseFloat(document.getElementById('c-cr').value), sex=document.getElementById('c-sex').value;
            if(!age||!w||!cr){alert("Preencha tudo");return;}
            let cl=((140-age)*w)/(72*cr); if(sex==='female')cl*=0.85;
            document.getElementById('res-cockcroft').style.display='block';
            let st=cl>90?"Normal":cl>60?"Leve":cl>30?"Moderado":cl>15?"Grave":"Fal√™ncia";
            document.getElementById('res-cockcroft').innerHTML=`<div class="result-val">${cl.toFixed(1)}</div>mL/min<div style="font-weight:bold; margin-top:5px; color:#555;">${st}</div>`;
        }
    </script>
</body>
</html>